<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <title>Nature Nexus</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-green-50 text-gray-800 flex flex-col min-h-screen">
    <!-- Fixed Header -->
    <header
      class="bg-gradient-to-r from-green-600 to-blue-500 text-white py-4 px-4 flex items-center justify-between fixed top-0 left-0 right-0 z-10"
    >
      <div class="flex items-center space-x-3">
        <div
          class="w-8 h-8 bg-white rounded-full flex items-center justify-center"
        >
          <svg
            class="w-6 h-6 text-green-600"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"
            ></path>
          </svg>
        </div>
        <h1 class="text-xl md:text-2xl lg:text-3xl font-bold">Nature Nexus</h1>
        <img src="../public/images/logo.png" alt="" />
      </div>
      <div>
        <% if (typeof user !== 'undefined' && user) { %>
        <span><%= user.email || user.username %></span>
        <% } %>
      </div>
    </header>

    <!-- Main Content (with padding to avoid overlap with header and nav) -->
    <main class="flex-1 pt-16 pb-16 overflow-y-auto px-4 md:px-8 max-w-screen-lg mx-auto">
      <!-- Home Section -->
      <section id="Home" class="tabcontent px-4 block">
        <div class="md:w-1/2"></div>
          <h2 class="text-2xl md:text-3xl font-bold mb-4">
            Welcome<% if (typeof user !== 'undefined' && user) { %>, <%=
            user.email || user.username %><% } %>!
          </h2>
          <p class="text-lg mb-6">Discover the wonders of nature around you.</p>
        </div>
        <div class="md:w-1/2 bg-white rounded-lg shadow p-4 mb-6">
          <h3 class="text-xl font-semibold mb-2">Your Stats</h3>
          <p>
            Birds Identified: <span class="font-bold text-green-600">0</span>
          </p>
          <p>
            Plants Identified: <span class="font-bold text-blue-500">0</span>
          </p>
        </div>
        <button
          onclick="openTab('Identify')"
          class="block bg-blue-500 text-white py-3 px-6 rounded-lg text-center hover:bg-blue-600 transition"
        >
          Identify Something New
        </button>
      </section>

      <!-- Identify Section (Hidden initially) -->
      <section id="Identify" class="tabcontent px-4 hidden">
        <h2 class="text-2xl font-bold mb-4">Identify Birds & Plants</h2>
        <p class="text-lg mb-6">Snap a photo to identify species in seconds!</p>
        <div class="bg-white rounded-lg shadow p-4 mb-6 text-center">
          <svg
            class="w-16 h-16 mx-auto mb-4 text-green-600"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"
            ></path>
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"
            ></path>
          </svg>
          <p class="mb-4">Upload a photo to identify a bird or plant.</p>
          <button
            class="bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition"
          >
            Take a Photo
          </button>
        </div>
        <p class="text-center text-gray-600">
          Results will appear here after identification.
        </p>
      </section>

      <!-- Collections Section (Hidden initially) -->
      <section id="Collections" class="tabcontent px-4 hidden">
        <h2 class="text-2xl font-bold mb-4">Your Collections</h2>
        <p class="text-lg mb-6">Create and manage your nature collections.</p>
        <div class="bg-white rounded-lg shadow p-4 mb-6 text-center">
          <p>You don't have any collections yet.</p>
          <button
            class="bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition mt-4"
          >
            Create Collection
          </button>
        </div>
      </section>

      <!-- Explore Section (Hidden initially) -->
      <section id="Explore" class="tabcontent px-4 hidden">
        <h2 class="text-2xl font-bold mb-4">Explore Biodiversity</h2>
        <p class="text-lg mb-6">Discover wildlife in your area.</p>
        <div class="bg-white rounded-lg shadow p-4 mb-6">
          <div
            class="h-40 bg-gray-200 rounded-lg flex items-center justify-center mb-4"
          >
            <p class="text-gray-500">Map will appear here</p>
          </div>
          <p class="text-center text-gray-600">
            Explore nearby wildlife sightings.
          </p>
        </div>
      </section>

      <!-- Settings Section (Hidden initially) -->
      <section id="Settings" class="tabcontent px-4 hidden">
        <h2 class="text-2xl font-bold mb-4">Settings</h2>
        <div class="bg-white rounded-lg shadow p-4 mb-6">
          <h3 class="text-xl font-semibold mb-2">Account</h3>
          <p>
            Email:
            <span class="font-medium"
              ><%= typeof user !== 'undefined' && user ? (user.email ||
              user.username) : 'Guest' %></span
            >
          </p>
          <p class="mt-4">
            <a href="/logout" class="text-red-500 hover:underline">Logout</a>
          </p>
        </div>
      </section>
    </main>

    <!-- Bottom Navigation -->
    <%- include('partials/footer') %>

    <script>
      function openTab(tabName) {
        // Hide all tab content
        const tabcontent = document.getElementsByClassName("tabcontent");
        for (let i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
        }

        // Remove active class from all tab links
        const tablinks = document.getElementsByClassName("tablink");
        for (let i = 0; i < tablinks.length; i++) {
          tablinks[i].classList.remove("active", "text-green-600");
          tablinks[i].classList.add("text-gray-600");
        }

        // Show the selected tab and add active class to the button
        document.getElementById(tabName).style.display = "block";

        // Find and activate the correct tab button
        const activeTab = document.querySelector(
          `.tablink[onclick*="openTab('${tabName}')"]`
        );
        if (activeTab) {
          activeTab.classList.add("active", "text-green-600");
          activeTab.classList.remove("text-gray-600");
        }
      }

      // Show the Home tab by default
      document.getElementById("Home").style.display = "block";
    </script>
  </body>
</html>
